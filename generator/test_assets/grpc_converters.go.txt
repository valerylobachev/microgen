// This file was automatically generated by "microgen 0.6.0" utility.
// Please, do not change functions names!
package protobuf

import (
	context "context"
	testout "github.com/valerylobachev/microgen/generator/test_out"
	stringsvc "github.com/valerylobachev/protobuf/stringsvc"
)

func EncodeUppercaseRequest(_ context.Context, request interface{}) (interface{}, error) {
	req := request.(*testout.UppercaseRequest)
	reqStr, err := ToProto(req.Str)
	if err != nil {
		return nil, err
	}
	return &stringsvc.UppercaseRequest{Str: reqStr}, nil
}

func EncodeCountRequest(_ context.Context, request interface{}) (interface{}, error) {
	req := request.(*testout.CountRequest)
	return &stringsvc.CountRequest{
		Symbol: req.Symbol,
		Text:   req.Text,
	}, nil
}

func EncodeTestCaseRequest(_ context.Context, request interface{}) (interface{}, error) {
	req := request.(*testout.TestCaseRequest)
	reqComments, err := ListPtrEntityCommentToProto(req.Comments)
	if err != nil {
		return nil, err
	}
	return &stringsvc.TestCaseRequest{Comments: reqComments}, nil
}

func EncodeUppercaseResponse(_ context.Context, response interface{}) (interface{}, error) {
	resp := response.(*testout.UppercaseResponse)
	return &stringsvc.UppercaseResponse{Ans: resp.Ans}, nil
}

func EncodeCountResponse(_ context.Context, response interface{}) (interface{}, error) {
	resp := response.(*testout.CountResponse)
	respPositions, err := ListIntToProto(resp.Positions)
	if err != nil {
		return nil, err
	}
	return &stringsvc.CountResponse{
		Count:     int64(resp.Count),
		Positions: respPositions,
	}, nil
}

func EncodeTestCaseResponse(_ context.Context, response interface{}) (interface{}, error) {
	resp := response.(*testout.TestCaseResponse)
	respTree, err := MapStringIntToProto(resp.Tree)
	if err != nil {
		return nil, err
	}
	return &stringsvc.TestCaseResponse{Tree: respTree}, nil
}

func DecodeUppercaseRequest(_ context.Context, request interface{}) (interface{}, error) {
	req := request.(*stringsvc.UppercaseRequest)
	reqStr, err := ProtoTo(req.Str)
	if err != nil {
		return nil, err
	}
	return &testout.UppercaseRequest{Str: reqStr}, nil
}

func DecodeCountRequest(_ context.Context, request interface{}) (interface{}, error) {
	req := request.(*stringsvc.CountRequest)
	return &testout.CountRequest{
		Symbol: string(req.Symbol),
		Text:   string(req.Text),
	}, nil
}

func DecodeTestCaseRequest(_ context.Context, request interface{}) (interface{}, error) {
	req := request.(*stringsvc.TestCaseRequest)
	reqComments, err := ProtoToListPtrEntityComment(req.Comments)
	if err != nil {
		return nil, err
	}
	return &testout.TestCaseRequest{Comments: reqComments}, nil
}

func DecodeUppercaseResponse(_ context.Context, response interface{}) (interface{}, error) {
	resp := response.(*stringsvc.UppercaseResponse)
	return &testout.UppercaseResponse{Ans: string(resp.Ans)}, nil
}

func DecodeCountResponse(_ context.Context, response interface{}) (interface{}, error) {
	resp := response.(*stringsvc.CountResponse)
	respPositions, err := ProtoToListInt(resp.Positions)
	if err != nil {
		return nil, err
	}
	return &testout.CountResponse{
		Count:     int(resp.Count),
		Positions: respPositions,
	}, nil
}

func DecodeTestCaseResponse(_ context.Context, response interface{}) (interface{}, error) {
	resp := response.(*stringsvc.TestCaseResponse)
	respTree, err := ProtoToMapStringInt(resp.Tree)
	if err != nil {
		return nil, err
	}
	return &testout.TestCaseResponse{Tree: respTree}, nil
}
